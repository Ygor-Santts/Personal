<template>
  <div
    class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900"
  >
    <div class="container mx-auto px-4 py-8">
      <h1 class="text-4xl font-bold text-white text-center mb-8">
        Carrossel Circular de Imagens
      </h1>
      <p class="text-center text-white/80 mb-8 max-w-2xl mx-auto">
        Demonstra√ß√£o do sistema circular com cards de imagens. Arraste para
        navegar ou use as setas.
      </p>

      <div class="max-w-6xl mx-auto">
        <!-- Carrossel Circular -->
        <div class="h-80 mb-8">
          <CircularCarousel
            ref="carouselRef"
            :items="imageCards"
            :visible-slides="3"
            :loop-infinite="true"
            :show-arrows="true"
            :show-indicators="true"
            :autoplay="false"
            :autoplay-interval="4000"
            :clones-per-side="5"
            :transition-ms="500"
            :ease="'cubic-bezier(0.25, 0.46, 0.45, 0.94)'"
            :pause-on-hover="true"
            :swipe-threshold="20"
            :drag-threshold="10"
            class="h-full"
          >
            <template #center-item="{ item }">
              <div class="w-full h-full rounded-xl overflow-hidden shadow-2xl">
                <img
                  :src="item.image"
                  :alt="item.alt"
                  class="w-full h-full object-cover transition-all duration-500 ease-out"
                />
              </div>
            </template>

            <template #side-item="{ item }">
              <div class="w-full h-full rounded-xl overflow-hidden">
                <img
                  :src="item.image"
                  :alt="item.alt"
                  class="w-full h-full object-cover transition-all duration-500 ease-out"
                />
              </div>
            </template>
          </CircularCarousel>
        </div>

        <!-- Conte√∫do do Card Central -->
        <div class="text-center mb-8">
          <div
            class="text-xs uppercase font-semibold tracking-widest text-gray-500 mb-2 transition-all duration-500 ease-out"
            :key="`tag-${activeCard.id}`"
          >
            {{ activeCard.tag }}
          </div>
          <h2
            class="text-2xl font-bold text-gray-800 mb-3 transition-all duration-500 ease-out"
            :key="`title-${activeCard.id}`"
          >
            {{ activeCard.title }}
          </h2>
          <p
            class="text-gray-600 mb-4 max-w-md mx-auto transition-all duration-500 ease-out"
            :key="`desc-${activeCard.id}`"
          >
            {{ activeCard.description }}
          </p>
          <div
            class="text-green-600 font-medium cursor-pointer hover:text-green-700 transition-all duration-300 ease-out inline-block"
            :key="`action-${activeCard.id}`"
          >
            {{ activeCard.actionLabel }}
          </div>
        </div>

        <!-- An√°lise T√©cnica -->
        <div class="bg-red-200/10 backdrop-blur-sm rounded-2xl p-6 text-white">
          <h2 class="text-2xl font-bold mb-4">
            üîç An√°lise T√©cnica do Sistema Circular
          </h2>

          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-xl font-semibold mb-3">üìê Arquitetura</h3>
              <ul class="space-y-2 text-sm">
                <li>
                  ‚Ä¢ <strong>Container Principal:</strong> translate3d() para
                  posicionamento global
                </li>
                <li>
                  ‚Ä¢ <strong>Slides Individuais:</strong> Cada slide tem sua
                  pr√≥pria transforma√ß√£o
                </li>
                <li>
                  ‚Ä¢ <strong>Sistema Circular:</strong> M√∫ltiplos clones formam
                  um c√≠rculo virtual
                </li>
                <li>
                  ‚Ä¢ <strong>√çndices Globais:</strong> -7 a +7 para criar o
                  efeito circular
                </li>
              </ul>
            </div>

            <div>
              <h3 class="text-xl font-semibold mb-3">üéØ Transforma√ß√µes</h3>
              <ul class="space-y-2 text-sm">
                <li>
                  ‚Ä¢ <strong>Escala:</strong> -1 a 1 (negativo para slides
                  "atr√°s")
                </li>
                <li>
                  ‚Ä¢ <strong>Posi√ß√£o:</strong> translateX() com porcentagens
                </li>
                <li>
                  ‚Ä¢ <strong>Opacidade:</strong> Fade out progressivo com
                  dist√¢ncia
                </li>
                <li>
                  ‚Ä¢ <strong>Z-Index:</strong> Slides mais pr√≥ximos ficam na
                  frente
                </li>
              </ul>
            </div>
          </div>

          <div class="mt-6">
            <h3 class="text-xl font-semibold mb-3">
              üßÆ Algoritmo de Posicionamento
            </h3>
            <div class="bg-black/20 rounded-lg p-4 font-mono text-sm">
              <div class="text-green-400">
                // C√°lculo da dist√¢ncia do centro
              </div>
              <div class="text-blue-400">
                const distance = slideIndex - centerIndex
              </div>
              <div class="text-green-400 mt-2">// Escala circular (-1 a 1)</div>
              <div class="text-blue-400">
                const scale = 1 - (Math.abs(distance) * 0.2)
              </div>
              <div class="text-green-400 mt-2">// Posi√ß√£o horizontal</div>
              <div class="text-blue-400">const translateX = distance * 50%</div>
              <div class="text-green-400 mt-2">// Opacidade progressiva</div>
              <div class="text-blue-400">
                const opacity = 1 - (Math.abs(distance) * 0.15)
              </div>
            </div>
          </div>
        </div>

        <!-- Compara√ß√£o com Implementa√ß√£o Anterior -->
        <div
          class="mt-8 bg-red-200/10 backdrop-blur-sm rounded-2xl p-6 text-white"
        >
          <h2 class="text-2xl font-bold mb-4">‚ö° Melhorias Implementadas</h2>

          <div class="grid md:grid-cols-3 gap-6">
            <div>
              <h3 class="text-lg font-semibold mb-2 text-green-400">
                ‚úÖ Sistema Circular
              </h3>
              <p class="text-sm opacity-90">
                Cada slide calcula sua posi√ß√£o individualmente baseada na
                dist√¢ncia do centro, criando um verdadeiro efeito circular como
                no Swiper.
              </p>
            </div>

            <div>
              <h3 class="text-lg font-semibold mb-2 text-blue-400">
                ‚úÖ Performance
              </h3>
              <p class="text-sm opacity-90">
                Container principal n√£o se move, apenas os slides individuais
                s√£o transformados. Isso reduz o trabalho do browser e melhora a
                performance.
              </p>
            </div>

            <div>
              <h3 class="text-lg font-semibold mb-2 text-purple-400">
                ‚úÖ Flexibilidade
              </h3>
              <p class="text-sm opacity-90">
                Sistema configur√°vel com clonesPerSide, permitindo ajustar o
                n√∫mero de clones e o alcance do efeito circular.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, ref } from "vue";
import CircularCarousel from "../components/CircularCarousel.vue";

interface ImageCard {
  id: number;
  image: string;
  alt: string;
  tag: string;
  title: string;
  description: string;
  actionLabel: string;
}

// Dados de cards de imagens (baseado no Exemplo 6)
const imageCards: ImageCard[] = [
  {
    id: 1,
    image:
      "https://images.unsplash.com/photo-1559847844-5315695dadae?w=800&h=600&fit=crop&crop=center",
    alt: "Pratos de camar√µes grelhados com lim√£o e ervas",
    tag: "CULIN√ÅRIA",
    title: "Camar√µes Grelhados Premium",
    description:
      "Deliciosos camar√µes grelhados servidos com lim√£o fresco e ervas arom√°ticas, preparados com t√©cnicas culin√°rias tradicionais.",
    actionLabel: "VER RECEITA",
  },
  {
    id: 2,
    image:
      "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=600&fit=crop&crop=center",
    alt: "Vista a√©rea de floresta tropical densa",
    tag: "NATUREZA",
    title: "Floresta Tropical",
    description:
      "Explore a beleza exuberante da floresta tropical com sua vegeta√ß√£o densa e biodiversidade √∫nica.",
    actionLabel: "EXPLORAR",
  },
  {
    id: 3,
    image:
      "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop&crop=center",
    alt: "Jardim paisag√≠stico com caminhos e vegeta√ß√£o",
    tag: "PAISAGISMO",
    title: "Jardim Paisag√≠stico",
    description:
      "Um o√°sis de tranquilidade com caminhos sinuosos e vegeta√ß√£o cuidadosamente planejada para relaxamento.",
    actionLabel: "VISITAR",
  },
  {
    id: 4,
    image:
      "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop&crop=center",
    alt: "Arquitetura moderna com linhas limpas",
    tag: "ARQUITETURA",
    title: "Design Moderno",
    description:
      "Edif√≠cios contempor√¢neos que combinam funcionalidade e est√©tica em harmonia perfeita.",
    actionLabel: "CONHECER",
  },
  {
    id: 5,
    image:
      "https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=800&h=600&fit=crop&crop=center",
    alt: "Paisagem montanhosa com p√¥r do sol",
    tag: "AVENTURA",
    title: "Montanhas Sagradas",
    description:
      "Descubra as majestosas montanhas que tocam o c√©u e inspire-se com vistas deslumbrantes.",
    actionLabel: "EXPLORAR",
  },
  {
    id: 6,
    image:
      "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800&h=600&fit=crop&crop=center",
    alt: "Cidade moderna com arranha-c√©us iluminados",
    tag: "URBANO",
    title: "Metr√≥pole Digital",
    description:
      "A energia pulsante da cidade moderna, onde tecnologia e vida urbana se encontram.",
    actionLabel: "DESCOBRIR",
  },
];

// Refer√™ncia para o carrossel
const carouselRef = ref(null);

// Computed para o card ativo baseado no currentIndex do carrossel
const activeCard = computed(() => {
  if (carouselRef.value && "currentIndex" in carouselRef.value) {
    const currentIndex = (carouselRef.value as any).currentIndex;
    return imageCards[currentIndex] || imageCards[0];
  }
  return imageCards[0]; // Fallback para o primeiro item
});
</script>

<style scoped>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>
